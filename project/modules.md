# Модули

## Глобальный модуль

По умолчанию, когда вы начинаете писать код в новом файле TypeScript, он находится в глобальном пространстве имен. Например, следующий код в `foo.ts`:

```typescript
const foo = 123;
```

Если вы создадите новый файл `bar.ts` в том же проекте, система типов TypeScript позволит вам использовать переменную `foo`, как если бы она была доступна глобально:

```typescript
const bar = foo; // allowed
```

Использование пространства глобальных переменных опасно, поскольку оно конфликтует с переменными в файле. Мы рекомендуем использовать файловый модуль, указанный ниже.

## Файловый модуль

Он также называется внешним модулем. Если вы включите `import` или `export` на корневом уровне вашего файла TypeScript, он создаст локальную область в этом файле. Поэтому нам нужно изменить вышеприведенный `foo.ts` к следующему виду \(обратите внимание на использование `export`\):

```typescript
export const foo = 123;
```

В глобальном пространстве имен у нас больше нет переменной `foo`, что можно доказать, создав новый файл `bar.ts`:

```typescript
const bar = foo; // ERROR: "cannot find name 'foo'"
```

Если вы хотите использовать переменные из `foo.ts` в `bar.ts`, вы должны явно импортировать его и обновить `bar.ts` следующим образом:

```typescript
import { foo } from './foo';
const bar = foo; // allow
```

Использование `import` в файле `bar.ts` не только позволяет использовать содержимое, импортированное из других файлов, но и помечает этот файл `bar.ts` как модуль, а объявления, определенные в файле, не будут загрязнять глобальное пространство имен.

## Детали файлового модуля

Файловый модуль обладает мощными возможностями и удобством использования. Здесь мы обсудим его возможности и некоторые применения.

### Пояснения: commonjs, amd, es modules, others

Во-первых, нам нужно прояснить несоответствия этих модульных систем. Я предоставлю вам мой текущий совет и некоторые проблемы.

Вы можете скомпилировать TypeScript в разные типы модулей JavaScript, основываясь на разных параметрах `module`. Вот некоторые вещи, которые вы можете игнорировать:

* AMD: не используйте его, он работает только в браузере;
* SystemJS: Это был хороший эксперимент, и его заменили модули ES;
* Модуль ES: не готов.

Хорошей идеей является использование параметра `module: commonjs` вместо указанных выше.

Как писать модули TypeScript также сбивает с толку. Сегодня мы должны делать так:

* Отказаться от использования синтаксиса `import / require`, т.е.  

  `import foo = require ('foo')`

*  Вместо этого используйте синтаксис модуля ES

Круто, давайте посмотрим на синтаксис модуля ES.

{% hint style="info" %}
Импортируйте, экспортируйте и записывайте модули, используя параметр `module: commonjs` и используя синтаксис модуля ES.
{% endhint %}

### Синтаксис модуля ES

* Используйте ключевое слово `export` для экспорта переменной \(или типа\):

```typescript
// foo.ts
export const someVar = 123;
export type someType = {
  foo: string;
};
```

* Экспорт переменной или типа в отдельном операторе `export`: 

```typescript
// foo.ts
const someVar = 123;
type someType = {
  type: string;
};

export { someVar, someType };
```

* Вы также можете переименовать переменные для экспорта:

```typescript
// foo.ts
const someVar = 123;
export { someVar as aDifferentName };
```

* Используйте ключевое слово `import` для импорта переменной или типа:

```typescript
// bar.ts
import { someVar, someType } from './foo';
```

* Переименуйте импортированные переменные или типы:

```typescript
// bar.ts
import { someVar as aDifferentName } from './foo';
```

* Помимо указания выходного значения для загрузки, вы также можете использовать глобальную загрузку, то есть указать объект со звездочкой \(\*\), и все выходные значения будут загружены в этот объект:

```typescript
// bar.ts
import * as foo from './foo';
// Вы можете использовать `foo.someVar` и` foo.someType` и
// любые другие переменные или типы, экспортированные из `foo`
```

* Импортируйте файл только для побочного эффекта с помощью одного оператора import:

```typescript
import 'core-js'; // стандартная библиотека polyfill
```

* Общий экспорт после импорта из других модулей:

```typescript
export * from './foo';
```

* Реэкспорт только конкретных из другого модуля

```typescript
export { someVar } from './foo';
```

* Реэкспорт только конкретных из другого модуля с переименованием

```typescript
export { someVar as aDifferentName } from './foo';
```



